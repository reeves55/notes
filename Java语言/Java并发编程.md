# Java并发编程



多线程的运行时必要开销来自于线程上下文切换，线程上下文切换会造成两种开销：

1. CPU需要花费时间来保存和恢复线程上下文信息；
2. 缓存失效

当多个线程间存在访问共享内存的情况时，需要使用一定的同步机制来避免并发问题，同步机制会导致：

1. 抑制编译器优化代码；
2. 刷新或者使CPU缓存失效；
3. 在共享内存总线上增加同步流量



对于一个对象来说，线程安全包括两个方面：

1. 自己所在线程访问一个其他线程也可能访问的共享变量时，协调好访问顺序；
2. 多个线程同时来访问自己的状态变量时，保证自己状态的正确性；



**线程安全的类**：在多线程并发访问类的时候，类仍然能够保持状态的正确性，而不需要调用者对访问其属性的操作进行同步保证，则这个类是线程安全的，这个时候类本身封装了内部变量访问的同步机制。